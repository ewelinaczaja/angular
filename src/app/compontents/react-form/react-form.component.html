<div class="container m-3">
  <h1 class="text-center">Reactive Form</h1>
</div>
<div class="container">
  <div class="row">
    <div class="col">
      <form [formGroup]="form">
        <!--binding dell'intero form come oggetto unico, non come nel td-form-->
        <div formGroupName="userInfo">
          <div class="form-group">
            <label for="nome">Nome</label>
            <input type="text" formControlName="nome" id="nome" class="form-control">
            <span *ngIf="getFormC('userInfo.nome')?.invalid && getFormC('userInfo.nome')?.touched">
              <ng-container *ngIf="getErrorsC('userInfo.nome', 'required')">Campo nome obbligatorio
              </ng-container>
            </span>
          </div>
          <div class="form-group">
            <label for="alterego">Alter Ego</label>
            <input type="alterego" formControlName="alterego" id="alterego" class="form-control">
            <span *ngIf="getFormC('userInfo.alterego')?.pending">Sto controllando...</span>
            <span *ngIf="getFormC('userInfo.alterego')?.invalid && getFormC('userInfo.alterego')?.touched">
              <ng-container *ngIf="getErrorsC('userInfo.alterego', 'required')">Campo Alter Ego obbligatorio
              </ng-container>
              <ng-container *ngIf="getErrorsC('userInfo.alterego', 'alterego')">Alter Ego non consentito</ng-container>
            </span>
          </div>
        </div>

        <div formArrayName="poteri" class="m-3">
          <h3>Super Poteri</h3>
          <button type="button" (click)="addPoteri()" class="btn btn-info">Aggiungi Super Poteri</button>
          <div class="form-group m-3" *ngFor="let poteriC of getPoteriF(); let i = index">
            <input type="text" class="form-control" [formControlName]="i">
          </div>
        </div>
        <div class="form-group">
          <label for="nome">Nemico</label>
          <input type="text" formControlName="nemico" id="nemico" class="form-control">
          <span *ngIf="getFormC('userInfo.nemico')?.invalid && getFormC('userInfo.nemico')?.touched">
            <ng-container *ngIf="getErrorsC('userInfo.nemico', 'required')">Campo nemico obbligatorio
            </ng-container>
          </span>
        </div>

        <button type="submit" (click)="submit()" class="btn btn-info">Invia</button>

      </form>
    </div>
  </div>
</div>
